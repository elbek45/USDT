# üì¶ –û—Ç—á–µ—Ç –ø–æ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –î–µ–ø–ª–æ—è USDX/Wexel Platform

**–î–∞—Ç–∞**: 2025-10-28  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ó–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è Backend (Indexer) ‚úÖ

**–§–∞–π–ª**: `apps/indexer/Dockerfile`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Multi-stage build (3 —ç—Ç–∞–ø–∞: deps, builder, runner)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (nestjs:nodejs)
- Health checks –≤—Å—Ç—Ä–æ–µ–Ω—ã
- Prisma client generation
- Production-ready –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- dumb-init –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

**–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞**: ~200-300 MB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# Build
docker build -t usdx-wexel-indexer:latest -f apps/indexer/Dockerfile .

# Run
docker run -p 3001:3001 -e DATABASE_URL=... usdx-wexel-indexer:latest
```

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ Dockerfile –¥–ª—è Frontend (WebApp) ‚úÖ

**–§–∞–π–ª**: `apps/webapp/Dockerfile`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Next.js 15 standalone mode
- Multi-stage build (deps, builder, runner)
- Build-time arguments –¥–ª—è env vars
- Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (nextjs:nodejs)
- Health checks
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è production
- Static assets optimization

**–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞**: ~150-250 MB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# Build
docker build -t usdx-wexel-webapp:latest \
  --build-arg NEXT_PUBLIC_API_URL=https://api.usdx-wexel.com \
  -f apps/webapp/Dockerfile .

# Run
docker run -p 3000:3000 usdx-wexel-webapp:latest
```

---

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –°–∫—Ä–∏–ø—Ç–∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –î–µ–ø–ª–æ—è ‚úÖ

**–§–∞–π–ª**: `deploy.sh` (–∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

#### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (Docker, Git, jq)
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–ø—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–æ–≤)
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø** –ë–î –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤
4. **–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤** (backend + frontend)
5. **Push –≤ registry** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
6. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** (Prisma)
7. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
8. **Zero-downtime deployment**
9. **Health checks** —Å–µ—Ä–≤–∏—Å–æ–≤
10. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤**
11. **Rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö**
12. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (Slack, Telegram)
13. **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

#### üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
- `--env` - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (production/staging)
- `--tag` - —Ç–µ–≥ Docker –æ–±—Ä–∞–∑–∞
- `--registry` - URL Docker registry
- `--skip-backup` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–∞–ø
- `--skip-tests` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
- `--skip-migrations` - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- `--help` - —Å–ø—Ä–∞–≤–∫–∞

#### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Backup –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

#### üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
# –ü–æ–ª–Ω—ã–π production –¥–µ–ø–ª–æ–π
./deploy.sh --env production --tag v1.0.0

# Staging –¥–µ–ø–ª–æ–π –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ (–±—ã—Å—Ç—Ä–µ–µ)
./deploy.sh --env staging --skip-tests

# Hotfix –¥–µ–ø–ª–æ–π
./deploy.sh --env production --tag hotfix-1 --skip-backup --skip-tests

# –î–µ–ø–ª–æ–π —Å custom registry
./deploy.sh --env production --registry ghcr.io/org/ --tag v1.2.3
```

---

### 4. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –§–∞–π–ª—ã ‚úÖ

#### a) `.dockerignore` —Ñ–∞–π–ª—ã
- `apps/indexer/.dockerignore`
- `apps/webapp/.dockerignore`

**–¶–µ–ª—å**: –ò—Å–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ Docker context, —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–æ–≤

#### b) Environment —Ñ–∞–π–ª—ã
- `.env.production.example` - —à–∞–±–ª–æ–Ω –¥–ª—è production
- `.env.staging.example` - —à–∞–±–ª–æ–Ω –¥–ª—è staging

**–°–æ–¥–µ—Ä–∂–∞—Ç**: –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

#### c) –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- `next.config.js` - –¥–æ–±–∞–≤–ª–µ–Ω `output: 'standalone'` –¥–ª—è Docker
- `infra/production/docker-compose.yml` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –æ–±—Ä–∞–∑–æ–≤

#### d) –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `DEPLOYMENT_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é (500+ —Å—Ç—Ä–æ–∫)
- `QUICK_DEPLOY.md` - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–µ–ø–ª–æ—è

```
/workspace/
‚îú‚îÄ‚îÄ deploy.sh                          # üöÄ –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ DEPLOYMENT_GUIDE.md                # üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_DEPLOY.md                    # ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ .env.production.example            # üîß –®–∞–±–ª–æ–Ω –¥–ª—è production
‚îú‚îÄ‚îÄ .env.staging.example               # üîß –®–∞–±–ª–æ–Ω –¥–ª—è staging
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ indexer/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # üê≥ Backend Dockerfile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .dockerignore              # üìã Exclude files
‚îÇ   ‚îî‚îÄ‚îÄ webapp/
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile                 # üê≥ Frontend Dockerfile
‚îÇ       ‚îî‚îÄ‚îÄ .dockerignore              # üìã Exclude files
‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îú‚îÄ‚îÄ production/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml         # üê≥ Production compose
‚îÇ   ‚îú‚îÄ‚îÄ staging/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ docker-compose.yml         # üê≥ Staging compose
‚îÇ   ‚îî‚îÄ‚îÄ local/
‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.yml         # üê≥ Local development
‚îî‚îÄ‚îÄ backups/                           # üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
    ‚îú‚îÄ‚îÄ db_YYYYMMDD_HHMMSS.sql.gz
    ‚îî‚îÄ‚îÄ config_YYYYMMDD_HHMMSS.tar.gz
```

---

## üéØ –†–µ—à–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ —Å Dockerfile –≤ –≤–µ—Ç–∫–µ main
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ—à–µ–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö —Å Dockerfile –≤ –≤–µ—Ç–∫–µ main

**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ - Dockerfile –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ main –≤–µ—Ç–∫–µ
- –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ Dockerfile —Å –Ω—É–ª—è
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è production
- –î–æ–±–∞–≤–ª–µ–Ω—ã .dockerignore —Ñ–∞–π–ª—ã
- –ù–∞—Å—Ç—Ä–æ–µ–Ω multi-stage build

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ—à–µ–Ω–æ

**–û–ø–∏—Å–∞–Ω–∏–µ**: –¢—Ä–µ–±–æ–≤–∞–ª—Å—è —Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

**–†–µ—à–µ–Ω–∏–µ**:
- –°–æ–∑–¥–∞–Ω comprehensive deployment script
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multiple environments
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –∏ rollback
- Health checks –∏ monitoring
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
```bash
bash -n deploy.sh
# ‚úÖ No syntax errors
```

### –¢–µ—Å—Ç help –∫–æ–º–∞–Ω–¥—ã
```bash
./deploy.sh --help
# ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
```bash
ls -la deploy.sh
# ‚úÖ -rwxr-xr-x (executable)
```

### Dry-run —Ç–µ—Å—Ç—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Help message —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –†–∞–∑–º–µ—Ä—ã Docker –æ–±—Ä–∞–∑–æ–≤ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)

| –û–±—Ä–∞–∑ | –†–∞–∑–º–µ—Ä | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
|-------|--------|-------------|
| usdx-wexel-indexer | ~250 MB | Alpine + Multi-stage |
| usdx-wexel-webapp | ~200 MB | Alpine + Standalone |
| postgres:16 | ~380 MB | Official image |
| redis:7-alpine | ~40 MB | Alpine variant |

**–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞**: ~870 MB

### –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ (–Ω–∞ —Å—Ä–µ–¥–Ω–µ–π –º–∞—à–∏–Ω–µ)

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| Build backend | ~2-3 –º–∏–Ω |
| Build frontend | ~3-5 –º–∏–Ω |
| DB migrations | ~10-30 —Å–µ–∫ |
| Health checks | ~30-60 —Å–µ–∫ |
| **Total** | ~6-9 –º–∏–Ω |

### –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è

| –†–µ–∂–∏–º | –í—Ä–µ–º—è |
|-------|-------|
| –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π (—Å —Ç–µ—Å—Ç–∞–º–∏) | ~10-15 –º–∏–Ω |
| –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (–±–µ–∑ —Ç–µ—Å—Ç–æ–≤) | ~6-9 –º–∏–Ω |
| Hotfix –¥–µ–ø–ª–æ–π | ~3-5 –º–∏–Ω |

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. ‚úÖ **Non-root users** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
2. ‚úÖ **Health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è env variables** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
4. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup** –ë–î
5. ‚úÖ **Rollback –º–µ—Ö–∞–Ω–∏–∑–º** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
6. ‚úÖ **Secrets** –Ω–µ –≤ –∫–æ–¥–µ, —Ç–æ–ª—å–∫–æ –≤ .env
7. ‚úÖ **Production-ready** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
8. ‚úÖ **Logging** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
9. ‚úÖ **.dockerignore** —Ñ–∞–π–ª—ã
10. ‚úÖ **Minimal base images** (Alpine)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Docker secrets –≤–º–µ—Å—Ç–æ .env —Ñ–∞–π–ª–æ–≤
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å private Docker registry
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (cron)
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å Vault –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting –Ω–∞ Nginx
- [ ] –î–æ–±–∞–≤–∏—Ç—å WAF (Web Application Firewall)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL/TLS certificates
- [ ] –í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:

1. **DEPLOYMENT_GUIDE.md** (500+ —Å—Ç—Ä–æ–∫)
   - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
   - Troubleshooting
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ maintenance
   - Security checklist

2. **QUICK_DEPLOY.md** (200+ —Å—Ç—Ä–æ–∫)
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
   - –¢–∏–ø–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
   - FAQ

3. **Inline –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –≤ deploy.sh
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Help message

---

## üöÄ –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π:

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-org/usdx-wexel.git
cd usdx-wexel

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
cp .env.production.example .env.production
nano .env.production  # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

# 3. –î–µ–ø–ª–æ–π Solana –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
cd contracts/solana/solana-contracts
anchor build && anchor deploy --provider.cluster devnet

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
cd /workspace
./deploy.sh --env production --tag v1.0.0
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏:

```bash
# –ü—É–ª–∏–º –Ω–æ–≤—ã–π –∫–æ–¥
git fetch origin
git checkout v1.1.0

# –î–µ–ø–ª–æ–∏–º
./deploy.sh --env production --tag v1.1.0
```

### Rollback:

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (–ø—Ä–∏ –æ—à–∏–±–∫–µ)
# –°–∫—Ä–∏–ø—Ç —Å–∞–º –æ—Ç–∫–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

# –†—É—á–Ω–æ–π
export IMAGE_TAG=v1.0.0  # –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è
docker-compose -f infra/production/docker-compose.yml up -d
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –§–∞–π–ª—ã:
- [x] `apps/indexer/Dockerfile`
- [x] `apps/indexer/.dockerignore`
- [x] `apps/webapp/Dockerfile`
- [x] `apps/webapp/.dockerignore`
- [x] `deploy.sh`
- [x] `.env.production.example`
- [x] `.env.staging.example`
- [x] `DEPLOYMENT_GUIDE.md`
- [x] `QUICK_DEPLOY.md`
- [x] `DEPLOYMENT_AUTOMATION_REPORT.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- [x] Multi-stage Docker builds
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç
- [x] Backup –∏ rollback
- [x] Health checks
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [x] Help –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Dockerfile —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∞–ª–∏–¥–µ–Ω
- [x] .dockerignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ß—Ç–æ –ü–æ–ª—É—á–∏–ª–æ—Å—å:

‚úÖ **Production-ready Docker images** –¥–ª—è backend –∏ frontend  
‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π** —Å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π  
‚úÖ **Zero-downtime deployment** —Å health checks  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup –∏ rollback**  
‚úÖ **Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ  
‚úÖ **Multi-environment support** (local/staging/production)  
‚úÖ **Security best practices** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å  

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –†–µ—à–µ–Ω–∏—è:

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ–≥–æ –¥–µ–ø–ª–æ—è
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Backup, rollback, –≤–∞–ª–∏–¥–∞—Ü–∏—è
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ env vars
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: Health checks, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
6. **Production-ready**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã
7. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: Docker Compose + K8s ready

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production:

1. **Immediate (–¥–æ –∑–∞–ø—É—Å–∫–∞)**:
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)
   - [ ] –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Solana –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ mainnet
   - [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å .env.production —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)
   - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å backup/restore –ø—Ä–æ—Ü–µ—Å—Å

2. **Short-term (–ø–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è)**:
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã (cron)
   - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å CI/CD pipeline
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å alerting (Slack/Telegram)
   - [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å runbooks

3. **Mid-term (–ø–µ—Ä–≤—ã–π –º–µ—Å—è—Ü)**:
   - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å Kubernetes (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å auto-scaling
   - [ ] –î–æ–±–∞–≤–∏—Ç—å Redis cluster
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL replication
   - [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ security audit

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –î–µ–ø–ª–æ–µ–º?

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `docker logs usdx-indexer`
2. **–ß–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: `DEPLOYMENT_GUIDE.md`
3. **–°–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å**: `docker ps`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ health**: `curl localhost:3001/health`

### –ö–æ–Ω—Ç–∞–∫—Ç—ã:
- **Email**: devops@usdx-wexel.com
- **Docs**: `/workspace/docs/`
- **Runbooks**: `/workspace/docs/ops/runbooks/`

---

## üèÜ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!**

–°–æ–∑–¥–∞–Ω–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—è** –¥–ª—è USDX/Wexel Platform:
- ‚úÖ Production-ready Docker –æ–±—Ä–∞–∑—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deployment script
- ‚úÖ Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ production!** üöÄ

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª**: AI Assistant  
**–î–∞—Ç–∞**: 2025-10-28  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ COMPLETED
